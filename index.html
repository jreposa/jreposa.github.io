<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8' />
    <title>Points on a map</title>
    <meta name='viewport' content='width=device-width, initial-scale=1' />
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.js"></script>
        <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css' rel='stylesheet' />
    <style>
  /*    body {
        margin: 0;
        padding: 0;
      }

      #map {
      position:absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }



    .mapboxgl-popup-content {
	       position: absolute;
	       top:0;
	       left:0}


.mapboxgl-popup-tip  {display:none}
      .project-info {
  position: absolute;
  font-family: sans-serif;
  margin-top: 5px;
  margin-left: 5px;
  padding: 5px;
max-width:400px;
  border: 2px solid black;
  font-size: 14px;
  color: #222;
  background-color: #fff;
  border-radius: 3px;

} */
* {
    box-sizing: border-box;
  }

  body {
    color: #404040;
    font: 400 15px/22px 'Source Sans Pro', 'Helvetica Neue', sans-serif;
    margin: 0;
    padding: 0;
    -webkit-font-smoothing: antialiased;
  }

  h1 {
    font-size: 22px;
    margin: 0;
    font-weight: 400;
    line-height: 20px;
    padding: 20px 2px;
  }

  a {
    color: #404040;
    text-decoration: none;
  }

  a:hover {
    color: #101010;
  }

  /* The page is split between map and sidebar - the sidebar gets 1/3, map
  gets 2/3 of the page. You can adjust this to your personal liking. */
/* #sidebar {
      position: absolute;
   width: 300px;
    height: 100%;
    top: 0;
    left: 0;
    overflow: scroll;
    border-right: 1px solid rgb(0 0 0 / 25%);
    padding:10px;
  }
*/
  .map {
    position: absolute;
    left: 33.3333%;
    width: 66.6666%;
    top: 0;
    bottom: 0;
  }


  .heading {
    background: #fff;
    border-bottom: 1px solid #eee;
    height: 60px;
    line-height: 60px;
    padding: 0 10px;
  }

    </style>
  </head>
  <body>

	  <div class="container-fluid">
		  <div class="row">
			  <div class="col-md-4">
<div id='sidebar'>
  <div class='heading'>
    <h1>ICI Projects</h1>
  </div>
  <div id='projects' class='projects'></div>
</div>
			  </div>
			    <div class="col-md-8">

<div id="map" class="map"></div>

</div>
</div>

<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoiaWNpLXVtYXNzIiwiYSI6IjU0OTZjZTY1M2I4NWM1ZTMxYTNjNzZmZDYxNjUwODlhIn0.-5DkuMz0Ots5OwiC-sJYVQ';
// Create a new map.
const map = new mapboxgl.Map({
    container: 'map',
    // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
    style: 'mapbox://styles/ici-umass/cioc5s9ps000atbmf58itrjol',
    center: [15.661557, 15.893748],
    zoom: 1
});

map.on('click', (event) => {
    const features = map.queryRenderedFeatures(event.point, {
        layers: ['countries']
    });
    if (!features.length) {
        return;
    }
    const feature = features[0];

    const popup = new mapboxgl.Popup()
        .setLngLat(event.lngLat)
        .setHTML(
            `<h4>${feature.properties.name}</h4>`
        )
        .addTo(map);


// Change the cursor to a pointer when the mouse is over the places layer.
map.on('mouseenter', 'countries', () => {
    map.getCanvas().style.cursor = 'pointer';
});

// Change it back to a pointer when it leaves.
map.on('mouseleave', 'countries', () => {
map.getCanvas().style.cursor = '';
});
});


// Event listener for click on map features
map.on('click', (event) => {
    const features = map.queryRenderedFeatures(event.point, {
        layers: ['countries']
    });
  if (features.length > 0) {
    var clickedFeature = features[0];
    updateSidebar(clickedFeature);
  }
});


// Function to update the sidebar content
function updateSidebar(feature) {
  var sidebar = document.getElementById('projects');
  sidebar.innerHTML = '<h2>' + feature.properties.name + '</h2>' +

'<p>' + '<b>'  + 'Project Name: ' + '</b>' + feature.properties.projectName + '</p>' + '<p>' + '<b>' + 'Project Goals: '  + '</b>' + feature.properties.projectGoals + '</p>' +

'<p>' +  '<b>'   + 'Project Activity:'  + '</b>' + feature.properties.projectActivity + '</p>' +

'<p>' +  '<b>'   + 'Partners: '  + '</b>' + feature.properties.partners + '</p>' +

'<p>' +  '<b>'  + 'Funders: '  + '</b>' + feature.properties.funders + '</p>' +

'<p>' +  '<b>' +  'Website: '  + '</b>' + feature.properties.projectLink + '</p>' +

'<p>' +  '<b>'  + 'Project Years: '   + '</b>' + feature.properties.projectYears + '</p>';
}




</script>


<!-- <div class='project-info'>
  <div><strong>Name:</strong> <span id='name'></span></div>
  <div><strong>Location:</strong> <span id='loc'></span></div>
  <div><strong>Date:</strong> <span id='date'></span></div>
</div> -->
  </body>
</html>
